#include <stdio.h>
#include <stdlib.h>
/*
struct ListNode {
    int val;
    struct ListNode *next;
};
*/

struct ListNode* removeElements(struct ListNode* head, int val) {
    struct ListNode filler;
    filler.next = head;
    struct ListNode* prev = &filler;

    while(head) {
        if(head->val == val) {
            struct ListNode* temp = head;
            head = head->next;
            free(temp);
            continue;
        }
        prev->next = head;
        prev = head;
        head = head->next;
    }
    prev->next = NULL;
    return filler.next;
}

